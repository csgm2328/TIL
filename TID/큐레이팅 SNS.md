# [Hobby Zoa](http://i5c102.p.ssafy.io)

## TID - 1
* __backend êµ¬ì¡° ì…‹íŒ…(dependency, DB erd)__
* __íšŒì›ê°€ì… ê¸°ëŠ¥ & Swagger__

## TID - 2
### __ì´ë©”ì¼ ì¸ì¦ êµ¬í˜„__
* __íë¦„__
  * íšŒì›ê°€ì… í›„ í† í°ìƒì„±(token save) í•¨ìˆ˜ í˜¸ì¶œ --> í† í°IDì™€ í•¨ê»˜ ì´ë©”ì¼ ì¸ì¦ ë§í¬ ì „ì†¡ --> ë§Œë£Œì „(5ë¶„) ë§í¬ ì ‘ì†ì‹œ ì¸ì¦ì™„ë£Œ --> ì¸ì¦ëœ ì´ë©”ì¼ë¡œ ì²˜ë¦¬(ì¬ì¸ì¦ë„ êµ¬í˜„)
* __ì…‹íŒ…__
  * __.yml__(propertiesë„ ê°€ëŠ¥)ë¡œ SMTP ì„œë¹„ìŠ¤ ì‚¬ìš©í•  ê³„ì • ì„¤ì •
  * DB: __Token ID(PK)__, ë§Œë£Œì‹œê°„(ìƒì„±í›„ 5ë¶„), ìƒì„±ì‹œê°„, ìœ ì € ID(FK), ë§Œë£Œì—¬ë¶€
* __Service__
  * @Service & @Autowired í•„ìˆ˜
  * ìƒˆë¡­ê²Œ Email packageë§Œë“¤ì–´ì„œ tokenservice, model, emailì „ì†¡service ë§Œë“¬
  * Controller/íšŒì›ê°€ì…ì—ì„œ user.save() --> createToken()
  * __createToken()__
    * tokenê°ì²´ë§Œë“¤ê³  save í›„ í† í°ê³¼ í•¨ê¼ ì´ë©”ì¼ ì „ì†¡
  * ì´ì œ ë§í¬ë¥¼ ëˆ„ë¥´ë©´ confirmToken()ìœ¼ë¡œ
    * ìœ ì €ê°€ ë§Œë£Œë˜ì§€ì•Šì€ í† í°ì„ ê°€ì§€ê³  ìˆëŠ”ì§€ jpa í•¨ìˆ˜ë¡œ ì–»ì–´ëƒ„
* __ì¬ì¸ì¦__
  * ìœ ì €ì´ë©”ì¼(PK)ë¥¼ ë°›ì•„ì™€ì„œ ê·¸ ìœ ì €ì˜ tokenì„ ë‹¤ DELETEí•˜ê³  ìƒˆë¡œìš´ í† í° ìƒì„± í›„ confirm
  
* __JPAëŠ” DBì™€ syncë¥¼ ìë™ìœ¼ë¡œ ë§ì¶°ì¤€ë‹¤__
  * ì´ë©”ì¼ ì¸ì¦ì„ ìœ„í•´ ìƒˆë¡œìš´ í† í° model.javaë¥¼ ë§Œë“¤ê³  ì„œë²„ë¥¼ ì¼°ì„ * ë¿ì¸ë° dbì— schemaê°€ ìƒê²¼ë‹¤????
  * í•˜ì§€ë§Œ null ì¡°ê±´ ë“± ì†ë´ì•¼í•¨
  * ìˆ˜ì •
    * ê·¸ë˜ì„œ Updateë¥¼ ë”°ë¡œ ì¿¼ë¦¬ë¥¼ ë§Œë“¤ì§€ ì•Šê³  ê°’ì„ ë°”ê¾¼ë‹¤ìŒì— findAll() * ì„ í†µí•´ hibernateê°€ select ì¿¼ë¦¬ ì „ì— Syncë¥¼ ë§ì¶°ì„œ updateë¥¼ * í•´ì¤€ë‹¤
    * findby()ëŠ” ì•ˆë¨
    * save()ë¡œ ìë™ìˆ˜ì •ë„ ê°€ëŠ¥
  * ì‚­ì œ
    * deleteByì†ì„±ì´ë¦„
    * ì ìš©ë˜ëŠ” ì¿¼ë¦¬ëŠ” id= ? ì´ì§€ë§Œ ì˜ ì ìš©ë¨

## TID - 3
* __ê³„ì • ì„¤ì • í˜ì´ì§€__
  * ë¹„ë²ˆ ë³€ê²½, ì°¾ê¸° & ê³„ì • ì •ë³´ ìˆ˜ì •
    * JPAë¡œ í¸ë¦¬í•œ RUDë¡œ í•´ê²° (Rì€ loginì‹œ responsebodyë¡œ ë„˜ê¹€)
  * í”„ë¡œí•„ ì´ë¯¸ì§€ ì˜¬ë¦¬ê¸°
    * í”„ë¡œí•„ table ìƒì„±
    * profile/emailë¡œ ìš”ì²­ì˜¤ë©´
    * getProfiledata()ë¡œ ë¦¬í„´
    * DBì— ì´ë¯¸ì§€ ë°ì´í„° ì˜¬ë¦¬ë ¤ê³  BLOBìœ¼ë¡œ byte[] ì €ì¥
    * í•˜ì§€ë§Œ í”„ë¡ íŠ¸ë‹¨ì—ì„œ ê·¸ byte[]ë¥¼ ë³´ì—¬ì£¼ëŠ” ê±° ë³µì¡
  * ì´ë©”ì¼ ì¸ì¦ì‹œ Front í˜ì´ì§€ë¡œ ì—°ê²°ë˜ë„ë¡ ì „ì†¡ë§í¬ë³€ê²½
  * controller
    * requestParamë§ê³  ê²½ë¡œìì²´ì— ë“¤ì–´ì˜¨ ê±¸ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ”  @PathVariableë¡œ ë³€ê²½

## TID - 4
* __í”„ë¡œí•„ ì´ë¯¸ì§€ ê¸°ëŠ¥__
  * git conflict
    * UserService ìˆ˜ì •ë¶€ë¶„ì´ ì¶©ëŒë‚¨ ì™œ???
    * ì•„ë§ˆ developì— merge í›„ ë‹¤ì‹œ ë‚´ ë¸Œëœì¹˜ì—ì„œ develop ë‚´ìš©ë“¤ì„ mergeí•˜ì§€ ì•Šì•„ì„œ ë°œìƒëœ ë“¯í•¨
    * í•´ê²°: ì›¹ì—ì„œ ì›ê²© merge í›„ì— local ì—ì„œ develop* pull ì´í›„ì— localë¡œ ë¨¸ì§€
      ```git
      $ git 
      $ git merge --no-ff "feature/~"
      ```
    * ì›ê²© ë¨¸ì§€ & ë¡œì»¬ ë¨¸ì§€ë¥¼ ì¶”ì²œí•´ì¤˜ì„œ ë‘˜ë‹¤í•´ì„œ ì˜ ë§ˆë¬´ë¦¬ë˜ì—ˆì§€ë§Œ
    * ì™œ ì¶©ëŒë‚¬ëŠ”ì§€ëŠ” ëª¨ë¥´ê² ë‹¤
  * imgdata ëŒ€ì‹  imgpath
    * íŒ€ì› ìš”ì²­ìœ¼ë¡œ DBì— ë§ê³  ë¡œì»¬ì— ì €ì¥í›„ urlì„ dbì— ì €ì¥
    * lombok ê¸°ëŠ¥ì¸ Builderë¡œ setter ëŒ€ì‹  ì‚¬ìš©
  * ImageHandler()
    * 
  * __íŒ”ë¡œìš° ê¸°ëŠ¥__
    * íŒ”ë¡œìš° ë²„íŠ¼ ëˆ„ë¥´ë©´ save(AI-code, from(A), to(B)
    * íŒ”ë¡œìš° ìƒíƒœì—ì„œ ë˜ ëˆ„ë¥´ë©´ ì–¸íŒ”ë¡œìš°
    * findByfromAndToí•´ì„œ ê°ì²´ ìˆìœ¼ë©´ ì‚­ì œ
    * íŒ”ë¡œìš° ìƒíƒœí‘œì‹œ
      * findByfromAndTo(ë‚˜, ë„ˆ) ê°ì²´ ìˆìœ¼ë©´ íŒ”ë¡œìš°ì¤‘
      * result.data = succes: íŒ”ë¡œìš° ì—¬ë¶€
      * ì–‘ë°©í–¥ íŒ”ë¡œìš°ìƒíƒœì¼ë• fromAndto(from,to), (to,from)ìœ¼ë¡œ ì²´í¬
    * Controller Swaggerì— í‘œí˜„í•˜ëŠ” description ë°”ê¾¸ë ¤ë©´ @ApiParam* (value = â€œemailâ€)ë¡œ
      * nameì€ íŒŒë¼ë¯¸í„° ë³€ìˆ˜ì´ë¦„ìœ¼ë¡œ ë“¤ì–´ê°
      * @requestParam(value = â€œâ€)ì´ê²ƒë„ ì“°ê³  parameterë„ ì“°ë©´ ê°’ì´ ë‘ë²ˆ * ë“¤ì–´ê°
    * @GeneratedValue(Auto Increment)
      * IdentityëŠ” DBê°€ ë§¡ì•„ì„œ AI 
      * SequenceëŠ” hibernate_sequence tableë§Œë“¤ì–´ì„œ ì´ í…Œì´ë¸”ì— AI * í…Œì´ë¸” ë‘ê³  hibernateê°€ ì—°ê³„í•´ì„œ AI
  * âš ï¸íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
    * PessimisticLockException: could not execute statement
      * ë””ë¹„ ì»¤ë°‹ì„ ì•ˆí•´ì£¼ë©´ ìƒê¸°ëŠ” ì˜¤ë¥˜
      * workbenchì—ì„œ ê°•ì œë¡œ ì§€ìš´ê²Œ ë°˜ì˜ì´ ì•ˆë˜ë‚˜í–ˆëŠ”ë°
      * í…ŒìŠ¤íŠ¸í•´ë³´ë‹ˆ ê·¸ê±´ ë˜ ì•„ë‹ˆë‹¤
      * ì„ì˜ì ìœ¼ë¡œ ë°œìƒí•˜ëŠ”ê±´ê°€?
    * JPA @Entity ì˜ ì–¸ë”ë°” ì‚¬ìš© ì£¼ì˜
      * DBì—ì„œ ì–¸ë”ë°” ì“°ê³  Entityì—ì„œë„ ì–¸ë”ë°” ì“°ë‹ˆê¹Œ ëª»ì•Œì•„ë“¤ìŒ
      * @Column(name = "from_email")
      * 	String fromemail;
      * í•œìª½ì—ì„œë§Œ ì“°ê³  ëª…ì‹œ
      * DB ë°˜ì˜ì•ˆë ë•Œ  ìˆì–´ì„œ autocommit ì„¤ì •
    * JPAë¡œ entityê´€ë¦¬í• ë•Œ ìƒì„±ì no, all í•„ìˆ˜

## TID - 5
* __íŒ”ë¡œìš° ê¸°ëŠ¥__
  * ìœ ì € ê²€ì¦í•˜ê¸° ìœ„í•´ profileControllerì—ì„œ userService.findbyId() ì‚¬ìš©
* __í”„ë¡œí•„ í˜ì´ì§€ ê¸°ëŠ¥__
  * ì´ë©”ì¼(PK), íŒ”ë¡œì‰, íŒ”ë¡œìš° ìˆ˜, í”¼ë“œ ìˆ˜, í”„ë¡œí•„ì´ë¯¸ì§€ path, 
  * ê³„ì • ìˆ˜ì •
* __íŒ”ë¡œì›Œ, íŒ”ë¡œì‰ ëª©ë¡ ê¸°ëŠ¥__
  * findALL()ë¡œ ê°ì²´ ê°€ì ¸ì˜¨ë‹¤ìŒ í”„ë¡ íŠ¸ì—ì„œ ì“°ê¸° ì‰½ê²Œ String ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜í•´ì„œ ì „ë‹¬



## TID - 6
* __ì•Œë¦¼ ê¸°ëŠ¥__
  * ìƒˆë¡œìš´ íŒ”ë¡œìš°ë‚˜ ì¢‹ì•„ìš”, ìŠ¤í¬ë© ë°œìƒì‹œ í•´ë‹¹ ì†Œìœ ìì—ê²Œ ì•Œë¦¼ ë°œì†¡
  * WebSocketì„ í†µí•´ ì„œë²„ì—ì„œ ë°œìƒí•œ ìš”ì²­ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í”„ë¡ íŠ¸ì—ì„œ í‘œì‹œí•´ì•¼í•¨
  * __WebSocketì´ë€?__
    * ë³´í†µì€ í”„ë¡ íŠ¸ì—ì„œ ìš”ì²­í•˜ê³  ë°±ì—ì„œ responseë¥¼ ë˜ëŒë ¤ì£¼ëŠ” í†µì‹ ì„ í•˜ì§€ë§Œ ì„œë²„ ìì²´ì—ì„œ ìš”ì²­ì„ ë§Œë“¤ì–´ì¤˜ì•¼ í•  ë•Œ ì‚¬ìš©í•œë‹¤.
    * EX)
      * ì±„íŒ…: í”„ë¡ íŠ¸ì—ì„œ ì¹œ ì±„íŒ…ì„ ì„œë²„ê°€ ë°›ì€ í›„ ìš”ì²­ì„ í•˜ì§€ ì•Šë˜ ë‹¤ë¥¸ ìœ ì €(í”„ë¡ íŠ¸)ì˜ í™”ë©´ì—ì„œë„ ë³¼ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•¨
      * ì•Œë¦¼: ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ì„œë²„ê°€ Target ìœ ì €ì—ê²Œ ì•Œë¦¼í‘œì‹œë¥¼ í•´ì¤Œ
    * ì´ëŸ° ë™ì‘ë“¤ì„ ìƒˆë¡œê³ ì¹¨ ì—†ì´ ê°€ëŠ¥ì¼€ í•¨
  * __Spring Boot ì™€ Vueì— ì ìš©í•˜ê¸°__
  * êµ¬ì„±
    * dependency ì¶”ê°€
    * WebSocketConfig.java
      * ì—°ê²°: ì—”ë“œí¬ì¸íŠ¸(url)ë¥¼ ì„¤ì •í•´ì„œ í”„ë¡ íŠ¸ë‹¨ì—ì„œ ì—°ê²° ìˆ˜ë¦½ í•¨ìˆ˜
      * ë¼ìš°íŒ…: í´ë¼ì´ì–¸íŠ¸ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ ë©”ì‹œì§€ ë¼ìš°íŒ…í•˜ê¸° ìœ„í•œ ë©”ì‹œì§€ ë¸Œë¡œì»¤ êµ¬ì„±
    * ì´ë ‡ê²Œ êµ¬ì„±ì„ í•˜ë©´ ìœ„ì˜ ë¼ìš°íŒ…ìœ¼ë¡œ ì—°ê²°ëœ ìœ ì €ë“¤ì€ í•´ë‹¹ ë¼ìš°í„°ë¥¼ **êµ¬ë…**ì¤‘ì¸ ìƒíƒœê°€ ë˜ê³  ì„œë²„ëŠ” ê·¸ êµ¬ë…í•˜ê³  ìˆëŠ” ëŒ€ìƒë“¤ì—ê²Œ ë©”ì„¸ì§€ë¥¼ broadcastí•  ìˆ˜ ìˆìŒ 
      * ë°±ì—”ë“œì—ì„œ ì†Œì¼“ ì„œë²„ë¥¼ ë§Œë“¤ê³  í”„ë¡ íŠ¸ì—ì„œ ì†Œì¼“ ì„œë²„ì— ì—°ê²°ìš”ì²­ì„ ë³´ë‚¸ í›„ êµ¬ë…ì„ í•˜ëŠ” ë°©ì‹
    * âš ï¸ì£¼ì˜: backendë‘ frontedë‘ PORT ë‹¤ë¥´ë¯€ë¡œ ì—°ê²°í• ë•Œ CORS ì…‹íŒ… í•´ì¤˜ì•¼í•¨
       ```js
        //ì´ë•Œ "*"ë¡œ ëª¨ë“  ê²½ë¡œ ì—´ì–´ì¤„ê²ƒì´ë¯€ë¡œ setAllowedOrigins() ëŒ€ì‹ 
        addEndpoint("/ws").setAllowedOriginPatterns("*")
        ```
    * Controller
      * MessageMapping() ì›¹ì†Œì¼“ ì—°ê²°ëœ í”„ë¡ íŠ¸ì—ì„œ ì˜¤ëŠ” ë©”ì‹œì§€ ìš”ì²­ì— ëŒ€í•œ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì›¹ì†Œì¼“ ì—°ê²°ë¡œ ë¦¬í„´í•¨
    * WebSocketEventListner
      * í†µí•´ ì„œë²„ë‚´ì— ì—°ê²° ìˆ˜ë¦½ê³¼ ëŠê¹€ ì´ë²¤íŠ¸ì‹œ logger ì„¤ì •ê°€ëŠ¥
  * êµ¬í˜„
    * ì°¸ê³  ì‚¬ì´íŠ¸
      * Backend
        * https://ratseno.tistory.com/71
        * https://blog.naver.com/PostView.nhn?blogId=gmlwo308&logNo=222210869950&parentCategoryNo=&categoryNo=35&viewDate=&isShowPopularPosts=true&from=search
      * Frontend
        * https://ratseno.tistory.com/72?category=773803
    * ì—°ê²°í•  ì„œë²„ urlë¡œ webSocket ì—°ê²°
      * í•´ë‹¹ í˜ì´ì§€ë¥¼ ì—´ê³  ìˆì„ ë•Œ ì†Œì¼“ì—°ê²°ì„ ìœ ì§€í•˜ëŠ” ê±°ë¼ ì—°ê²° íƒ€ì´ë°ì„ ê²°ì •í•˜ëŠ”ê²Œ ì•„ë‹ˆë‹¤
      * ëª¨ë“  í˜ì´ì§€ì— í•­ìƒ ìˆëŠ” í—¤ë”ì—ë‹¤ê°€ ì—°ê²°ì½”ë“œë¥¼ ë„£ì–´ì•¼í•¨
    * ì„±ê³µì‹œ
      * subscribe() êµ¬ë…í•  ë¼ìš°íŒ… ì„¤ì •
        * ex) send(addUser())ê°™ì€ í•¨ìˆ˜ë„ ë™ì‘ì‹œì¼œì„œ ì„œë²„ì— ëˆ„ê°€ ì…ì¥í–ˆëŠ”ì§€ ì•Œë¦´ ìˆ˜ ìˆìŒ
      * /queue/{ë¡œê·¸ì¸í•œ email}ìœ¼ë¡œ êµ¬ë…í•  ë•Œ ìì‹ ì—ê²Œ ë¼ìš°íŒ…ëœ ì•Œë¦¼ë§Œ ë°›ê¸°
        ```java
        Controllerë¥¼ ì‚¬ìš©í•´ì„œ @MessageMappingê³¼
        @sendToUser() + return Message ë°©ì‹ ëŒ€ì‹ ì—

        //ì•Œë¦¼ì´ í•„ìš”í•œ ê¸°ëŠ¥ ë™ì‘ í›„ì— ì•Œë¦¼ë©”ì‹œì§€ë¥¼ ì—°ê³„ ë™ì‘ìœ¼ë¡œ ìƒì„±í•´ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ
        void + messageTemplate.ConvertandSend("/queue/" + email)
        ```
    * __í•µì‹¬: ì„œë¹„ìŠ¤ í•¨ìˆ˜ë“¤ì— ì•Œë¦¼í•¨ìˆ˜ë¥¼ ì¶”ê°€í•´ ì„œë¹„ìŠ¤ ë™ì‘ í›„ ì•Œë¦¼ì´ ë°œìƒí•˜ë„ë¡ ì—°ê²°__
      * profileController.follow() ê°€ ì•„ë‹ˆê³ ,   
      * alarmService.follow() ë„ ì•„ë‹ˆê³ 
      * alarmService.createAlarm(í•¨ìˆ˜í•˜ë‚˜ë¡œ alarmtypeìœ¼ë¡œ êµ¬ë¶„í•´ì„œ ëª¨ë“  ì•Œë¦¼ ì²˜ë¦¬)
      * ì•Œë¦¼ì„ ë”°ë¡œ Controllerë¡œ ë¼ìš°íŒ…í•˜ì§€ ì•Šê³  íƒ€ì…ë³„ë¡œ ë©”ì„¸ì§€ë¥¼ ë§Œë“¤ì–´ë‚¸ë‹¤
      * ë§Œë“¤ì–´ì§„ ë©”ì„¸ì§€ëŠ” DBì— ì¶”ê°€í•˜ê³  êµ¬ë…ì¤‘ì¸ ê³³ì— send()ë¡œ êµ¬ë…ì¤‘ì¸ ìœ ì €ë“¤ì—ê²Œ broadcast
  
    * __ìƒì„¸ ê¸°ëŠ¥__
      * ê° serviceImplì—ì„œ ì„œë¹„ìŠ¤ ì²˜ë¦¬í›„ **AlarmService.createAlarm() í˜¸ì¶œ**
        * createAlarmìœ¼ë¡œ ì›¹ì†Œì¼“ ë©”ì‹œì§€ ë¦¬í„´í•  ê²ƒì€ ìƒì„¸ ì•Œë¦¼ ì •ë³´ê°€ ì•„ë‹ˆë¼ ì•Œë¦¼ bellì— í‘œì‹œí•  ìƒˆë¡œìš´ ì•Œë¦¼ì˜ ê°œìˆ˜ë‹¤.
        * countAlarm() í˜¸ì¶œ
      * alarmType, From, toì´ ê°™ì€ ì•Œë¦¼ì€ í•˜ë‚˜ë§Œ ìƒì„±
      * from == to ì•Œë¦¼ì€ ìƒì„±ì•ˆí•¨
      * í•´ë‹¹ ìœ ì €ì— ëŒ€í•œ ì•Œë¦¼ ëª©ë¡**ìš”ì²­**ì€ **AlarmController**ë¡œ ì²˜ë¦¬
        * ì•ˆì½ì€ ê²Œ ë¨¼ì €ì˜¤ë„ë¡
        * ì½ì€ê±°ëŠ” í•œë‹¬ ë‚´ ìƒì„±ëœê²ƒë§Œ
      * ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬ í›„ countAlarm() í˜¸ì¶œ
      * ì›°ì»´ ì•Œë¦¼ì„ ê´€ë¦¬ìê°€ ë³´ë‚´ì£¼ë¯€ë¡œ DB ì´ˆê¸°í™”í›„ì— adminì€ ë§Œë“¤ê³  ì•Œë¦¼ ì¼œì•¼í•¨

    * __FrontEnd__
      * ì›¹ì†Œì¼“ ì—°ê²°ì´ í•´ë‹¹í˜ì´ì§€ë¥¼ ë²—ì–´ë‚˜ë©´ ëŠê¸°ë¯€ë¡œ
      * í•´ë‹¹ ìœ ì €ê°€ ì–´ë–¤ í˜ì´ì§€ì—ìˆë˜ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” Headerì—ë‹¤ê°€ ì›¹ì†Œì¼“ì„ ì—°ê²°í•œë‹¤
      * bell iconì— Vuetify badges ì ìš©í•˜ë©´ ì•Œë¦¼ ê°œìˆ˜ ë³´ì„
  ## TID - 7
  * ìƒˆë¡œìš´ ìŠ¤í”„ë¦°íŠ¸ í”„ë¡œì íŠ¸ ì‹œì‘
    ```git
      $ git remote set-url "ìƒˆë¡œìš´ í”„ë¡œì íŠ¸"
    ```
  * __ë°°í¬__
    * AWS server í™˜ê²½ ì„¤ì •
    * mariaDB > source ./sql
      * index ì˜¤ë¥˜ ìˆì–´ì„œ ì§€ì›Œì¤Œ
    * ì²« spring boot:run 5ë¶„ì´ìƒ ì†Œìš”
    * mvn packageë¡œ ë¹Œë“œ í›„(ë³€ê²½ ì‹œ í•„ìš”)
    * jar servlet.context=/api ê²½ë¡œ ì§€ì • ì‹¤í–‰ìœ¼ë¡œ boot ì‹¤í–‰
    * __Nginx ì„¤ì •__
      * Nginxë€?
        * ë¹„ë™ê¸°ë°©ì‹ì´ë¼ ë§¤ìš° ë†’ì€ ì„±ëŠ¥
        * load balancerë‚˜ API gatewayë¡œ ì‚¬ìš©ê°€ëŠ¥
        * í”„ë¡ íŠ¸ì—”ë“œ(ì •ì íŒŒì¼) ì„œë¹„ìŠ¤í• ë•Œ ë›°ì–´ë‚œ ì„±ëŠ¥
        * í¬ë¡¬, firefoxë„ ì´ê±¸ë¡œë§Œë“¬
        * nginxë¡œ ë“¤ì–´ì˜¤ëŠ” ê±´ http ì•„ë‹ˆë©´ https
      * sites ì„¤ì •ì—ì„œ
      * rootì— í”„ë¡ íŠ¸ dist ê²½ë¡œë„£ê³ 
      * server location / ëŠ” í”„ë¡ íŠ¸ ê²½ë¡œ(web server ì—­í• )
      * location /apiëŠ” ë°±ì—”ë“œ ê²½ë¡œë¡œ ì§€ì •(API gateway ì—­í• )
      * ê·¸ëŸ¬ë©´ ì´ì œ nginxê°€ ì›¹ì„œë²„ì—­í• ì„ í•˜ë©´ì„œ ë¹Œë“œ íŒŒì¼ ìœ„ì¹˜ë§Œ ì•Œë ¤ì£¼ë©´ nodeë¥¼ ì‹¤í–‰í•  í•„ìš”ê°€ ì—†ì–´ì§„ë‹¤
      * __ì—…ë¡œë“œ ì´ë¯¸ì§€ í¬ê¸° ì„¤ì •__
        ```shell
        #conf
        http {
          client_max_body_size 10M;
        }
        #default
        server {
          client_max_body_size 10M;
        }
        ```
        ```properties
        spring.servlet.multipart.maxFileSize=5MB
        spring.servlet.multipart.maxRequestSize=10MB
        ```
      * 
    * ë„ì»¤?
      * ì™œ ë„ì»¤ë¥¼ ì¨ì•¼í•˜ëŠ”ì§€
        * vm, autoscalingì€ í­ë°œì ì¸ íŠ¸ë˜í”½ì„ í•´ê²°í•˜ì§€ëª»í•œë‹¤.
        * ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ ë†“ê¸°ë§Œ í•œë‹¤ë©´ ìš´ì˜ì²´ì œë¥¼ ë¶€íŒ…í•˜ì§€ ì•ŠëŠ” ë„ì»¤ëŠ” ë¹ ë¥´ê²Œ í•„ìš”í•œ ì„œë²„ë¥¼ ì¦ì„¤í•  ìˆ˜ ìˆë‹¤.
        * ë§Œë“¤ì–´ ë†“ì€ ì´ë¯¸ì§€ëŒ€ë¡œ ë°°í¬í•˜ëŠ” í¸ì˜ì„±
        * ê·¸ëŸ¬ë¯€ë¡œ í”„ë¡ íŠ¸/ ë°±ì€ ë„ì»¤í™”í•´ì•¼í•¨
        * DB, Jenkins, nginxì˜ ë„ì»¤í™”ëŠ” ì„ íƒ
          * DBë¥¼ ë°°í¬í•˜ëŠ” ê²½ìš°ëŠ” ê±°ì˜ ì—†ê³ 
          * ë¹Œë“œì„œë²„ê°€ ë§ì„ í•„ìš”ëŠ” ì—†ìœ¼ë‹ˆ

    * VS Code SSH ì„¤ì •
      * ~/.ssh/ ì•„ë˜ë¡œ .pem ì˜®ê¸°ê³ 
      * í¬íŠ¸ë²ˆí˜¸ awsëŠ” í¬íŠ¸ë²ˆí˜¸ ì“°ë©´ ì•ˆë¨
    * ë°°í¬ì„œë²„ì— ì´ë¯¸ì§€ ê²½ë¡œ ìˆ˜ì •
      * window í™˜ê²½ --> linux

    * __ë³´ì•ˆì„¤ì •__
      * .pemí‚¤ë¥¼ gitlabì—ì„œ ëˆ„êµ¬ë‚˜ ë‹¤ìš´ë°›ì„ ìˆ˜ ìˆìŒ
      * ê·¸ëŸ¬ë¯€ë¡œ ëˆ„êµ¬ë“  ì ‘ì† ê°€ëŠ¥.
      * ì ‘ì†ì„ í•˜ë©´ ì¼ë‹¨ ì„œë²„ ì½”ë“œë¥¼ ë³¼ ìˆ˜ ìˆì–´ì„œ
      * applcation.* ë³´ê¸° ê¶Œí•œ ì„¤ì •í•˜ê¸°
        * ğŸ› ï¸í•´ê²° 
        * sudo ë¹„ë²ˆ ì„¤ì •
        * application.* íŒŒì¼ë“¤ ì†Œìœ ,íŒŒì¼ ê¶Œí•œ rootë¡œ ë³€ê²½
          * ê¶Œí•œ ë³€ê²½ë§Œ í–ˆì„ ë•ŒëŠ” 
        * ì´ì   ë¹Œë“œë¥¼ **sudo ê¶Œí•œ**ìœ¼ë¡œí•´ì•¼í•œë‹¤
          * ê·¼ë° sudoë¡œ ë¹Œë“œí•˜ë©´ ì™œ ë‹¤ì‹œ ì²˜ìŒë¶€í„° ë‹¤ìš´ë°›ì§€???
      * sudo mysql ë§‰ê¸°
        * ğŸ› ï¸í•´ê²° 
        * /usr/bin/mysql_secure_installation ì‹¤í–‰
        * root ê³„ì • password ì„¤ì •
        * rootë¡œì˜ ì›ê²©ì ‘ì† ë§‰ê¸° ì„¤ì •
          * ì´ë ‡ê²Œ í•˜ë©´ root@%(ëª¨ë“  ì›ê²© í—ˆìš©í–ˆë˜) ê³„ì •ì´ ì‚¬ë¼ì§
          * ê·¸ëŸ¬ë¯€ë¡œ root@serverIP ì¶”ê°€í•´ì¤˜ì•¼í•¨
      * IP ì°¨ë‹¨ì„ ìœ„í•´ì„œëŠ” ufwë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ”ë° sshê¹Œì§€ ì°¨ë‹¨ë  ìœ„í—˜ì´ ìˆì–´ì„œ ë³´ë¥˜
      * time_zone ì„¤ì • (datasourceì…‹íŒ…í•´ë„ ì•ˆë°”ë€œ)
        ```sql
        # ì¼ì‹œì  ì„¸íŒ…
        SET GLOBAL time_zone='Asia/Seoul';
        set time_zone='Asia/Seoul';
        ```
        ```sh
        # ê¸€ë¡œë²Œ ì„¸íŒ… restart í•„ìš”
        vi /etc/mysql/my.cnf
        [mysqld]
        default-time-zone='Asia/Seoul'
        ``` 
    * SSL
      * ë¡œê·¸ì¸ê°™ì€ ê²½ìš° íšŒì›ì •ë³´ë¥¼ ì•”í˜¸í™”í•´ì„œ ë³´ë‚´ì•¼í•¨
      * ë§¤ë²ˆ ì´ë ‡ê²Œ ì•”í˜¸í™”í•˜ê¸° ë²ˆê±°ë¡œã…‹ìš°ë‹ˆ TLS(Transport Layer Securityfhë¥¼ ì‚¬ìš©í•´ì„œ ì•”í˜¸í™”)
    * Cert Bot
      * ìƒìš© í”„ë¡œê·¸ë¨ ì œì‘í•  ë•Œ êµ¬ë§¤í•´ì„œ ì‚¬ìš©í•˜ëŠ” Root ì¸ì¦ì„œ
      * ë¬´ë£Œ ì¸ì¦ì„œë„ ìˆìœ¼ë‹ˆ FE & BEì— ì„¤ì •
    * ubuntu , root ë§ê³  ì‚¬ìš©ì ê³„ì • ë”°ë¡œ ë§Œë“¤ì–´ì•¼ í•´í‚¹ íƒ€ê²Ÿì„ í”¼í•  ìˆ˜ ìˆìŒ
    * WebSocket HandShake error(Connection Header error)
      * <img src="..\assets\websocket handshake error.JPG">
      * ğŸ› ï¸ í•´ê²°
        * nginx config: /etc/nginx/sites-enabled/default
        * ì—ì„œ headerë¥¼ ì—…ê·¸ë ˆì´ë“œ í•´ì¤Œ
        ```sh
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        ```
    * âš ï¸ EC2 ì—ì„œ Google EmailSender ë³´ì•ˆ ë¬¸ì œ
      * https://myaccount.google.com/lesssecureapps?pli=1&rapt=AEjHL4MeKKMmmil0-s9aZNPDKI_KYzblyQkN-i5OF7jqLiemjfoYucG6srbUHJeDBT7Rz2Redt-a1G9nFBw-loTlJozpCkaFBw
      * ê¸°ë³¸ì ìœ¼ë¡œ í—ˆìš© í›„ì—ë„ EC2ë¡œ ì ‘ê·¼ì‹œ ë§‰í ë•Œ
      * https://accounts.google.com/b/0/DisplayUnlockCaptcha
      * ì´ê²ƒë„ í—ˆìš©
      
  * âš ï¸ MySQL WorkBench ì˜¤ë¥˜
    * user tableì˜ emailì„ ëª¨ë‘ê°€ FKë¡œ ì“°ëŠ”ë° ì—¬ëŸ¬ í…Œì´ë¸”ì´ ì°¸ì¡°ê°€ ë¶ˆê°€ëŠ¥í•œ ìƒí™© ë°œìƒ
    * mariadb serverì—ì„œëŠ” indexë¥¼ ì§€ìš°ê³  í•˜ë‹ˆê¹Œ ë˜ê³ 
    * workbenchì—ì„œëŠ” ì•„ì˜ˆ í…Œì´ë¸”ì„ ìƒˆë¡œë§Œë“¤ì–´ì„œ í•˜ë‹ˆê¹Œ ë¨

  * âš ï¸ DB ì»¬ëŸ¼ì˜ ì˜ˆì•½ì–´ ì£¼ì˜,,
    * check, like, from
    * boolean column getterë™ì‘ì•ˆí•˜ëŠ” ì´ìœ ëŠ”?

  * ë‚ ì§œ ì–´ë…¸í…Œì´ì…˜ @Auditing
    * @CreatedDate , @LasetModifiedDate ìë™
    * ëª¨ë¸ì— @EntityListeners(AuditingEntityListener.class) ì¶”ê°€
    * application.javaì— @EnableJpaAuditing ì¶”ê°€
    * ì´ë ‡ê²Œ ë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©ì´ ì‹«ë‹¤ë©´
      * @Column(insertable = false, updatable= false)ë§Œìœ¼ë¡œë„ ê°€ëŠ¥
## TID - 8
* CI/CD
  * gitlab Runner ì‚¬ìš©í•˜ê¸°
    * Runner ì„¤ì¹˜ & ë“±ë¡
    * Build & Deploy Stage êµ¬ì„±
      * $CI_PROJECT_DIR : job ì‹¤í–‰í•  full path í´ë¡ 
    * __ë¹Œë“œ__
      * properties ê¶Œí•œ ë•Œë¬¸ì— sudo mvn packageë¡œ ë¹Œë“œí•´ì•¼í•˜ëŠ”ë°
      * sudo ê¶Œí•œì„ ì¤˜ë„ ê¶Œí•œì—ëŸ¬ê°€ ê³„ì† ë°œìƒí•´ì„œ
      * chmod +x mvnw --> ./mvnw packageë¡œ ë¹Œë“œ ì„±ê³µí•¨
      * ë¹Œë“œ ì„±ê³µí•˜ë©´ target/*.jar ë¥¼ $HOME/app1.jarë¡œ ë³µì‚¬
        * target/*.jarì˜ ê¶Œí•œì€ ubuntuì´ê¸° ë•Œë¬¸ì— runner ê¶Œí•œì˜ jarë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ê²ƒ!
      * gitignoreì— ìˆë˜ .yml ì½ì–´ì•¼ í•´ì„œ ë‹¤ì‹œ gitì— ì˜¬ë¦¼
      * ğŸ› ï¸ websocketì—ëŸ¬ë¡œ ë””íœë˜ì‹œ ì¶”ê°€
      ```properties
      spring.jpa.database-platform=org.hibernate.dialect.MySQL5Dialect
      ```
    * __ì‹¤í–‰__
       * gitlab-runnerë¼ëŠ” ìœ ì €ë¡œ ci/cdë¥¼ ì‹¤í–‰ëœë‹¤.
       * ubuntu ê¶Œí•œì˜ ê¸°ì¡´ íŒŒì¼ë“¤ì„ ì½ì„ ìˆ˜ ì—†ê¸°ì— backend í´ë”ë¥¼
       * ë³µì‚¬í•´ì„œ jarë¥¼ íŒŒì¼ì²˜ëŸ¼ gitlabì—ë„ backend í´ë”ë¥¼ ë§Œë“¤ì–´ì¤Œ
         * ì´ë˜ì•¼ jar ì‹¤í–‰í•œ $HOME pathë¥¼ ê¸°ì¤€ìœ¼ë¡œ /images ë“±ì„ ì°¾ì•„ê°ˆ ìˆ˜ ìˆë‹¤.
         * gitlab-runnerë¡œ ì‹¤í–‰ì‹œ app.pidë¥¼ ëª»ë§Œë“¤ê³  ì¶”ì ì´ ë¶ˆê°€ëŠ¥í•´ì„œ
            ```sh
            #restart.sh
            kill $(ps -ef |grep java | awk '{print $2}')
            ```
       * front build ìœ„ì¹˜ ì¡°ì •
         ```sh
         #root /home/ubuntu/SubPJT3/S05P13C102/frontend/dist;
         root /home/gitlab-runner/dist;
         ```

    * restart.sh
      * ìƒëŒ€ê²½ë¡œë¡œ app1.jarë¥¼ ì°¾ì•„ì•¼í•˜ë¯€ë¡œ /backendì—ì„œ ì‹¤í–‰
      ```yml
      deploy-back: 
          ...
      script :
        - cd $HOME/backend
        - ~/restart_backend1.sh
      ```
    * __ê²°ê³¼__
    <img src ="..\assets\gitlab_cicd_passed.JPG">

